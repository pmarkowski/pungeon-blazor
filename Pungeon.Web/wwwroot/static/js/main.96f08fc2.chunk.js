(this["webpackJsonppungeon-react-experiments"]=this["webpackJsonppungeon-react-experiments"]||[]).push([[0],{26:function(e,t,n){e.exports=n(50)},31:function(e,t,n){},32:function(e,t,n){},50:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),o=n(5),r=n.n(o),s=(n(31),n(32),n(18)),c=n(19),d=n(25),l=n(24),u=n(13),h=n(23),m=n(1),v=n(7),y=Object(v.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE_MOVE_Y":return Object(m.a)(Object(m.a)({},e),{},{moveY:!e.moveY});case"MOUSE_DOWN":return Object(m.a)(Object(m.a)({},e),{},{mouseDown:!0,mouseStartX:t.x,mouseStartY:t.y});case"MOUSE_UP":return Object(m.a)(Object(m.a)({},e),{},{mouseDown:!1});case"ADD_SPACE":var n=e.dungeon.spaces.slice();return n=[].concat(Object(h.a)(n),[t.newSpace]),Object(m.a)(Object(m.a)({},e),{},{dungeon:Object(m.a)(Object(m.a)({},e.dungeon),{},{spaces:n})});default:return e}}),{id:"823cc811-9499-4f3d-abeb-941d2ee4fd98",moveY:!1,mouseDown:!1,mouseStartX:0,mouseStartY:0,dungeon:{size:{width:28,height:32},spaces:[{id:"01f998f7-3ad4-43c6-b498-3249ab470b05",position:{x:1,y:1},size:{width:5,height:5}},{id:"79178d8c-3a3e-42ee-b1ec-00dc37a045fc",position:{x:6,y:4},size:{width:7,height:9}},{id:"6ce25fdc-9fd4-46c0-a924-74f5f9174193",position:{x:15,y:15},size:{width:6,height:7}},{id:"e211fbd3-a817-47a5-bb47-481ba330e46d",position:{x:21,y:19},size:{width:4,height:9}}],walls:[{start:{x:1,y:1},end:{x:1,y:6}},{start:{x:6,y:6},end:{x:1,y:6}},{start:{x:6,y:13},end:{x:6,y:6}},{start:{x:13,y:13},end:{x:6,y:13}},{start:{x:13,y:4},end:{x:13,y:13}},{start:{x:6,y:4},end:{x:13,y:4}},{start:{x:6,y:1},end:{x:6,y:4}},{start:{x:1,y:1},end:{x:6,y:1}},{start:{x:15,y:15},end:{x:15,y:22}},{start:{x:21,y:22},end:{x:15,y:22}},{start:{x:21,y:15},end:{x:15,y:15}},{start:{x:21,y:19},end:{x:21,y:15}},{start:{x:25,y:19},end:{x:21,y:19}},{start:{x:21,y:22},end:{x:21,y:28}},{start:{x:21,y:28},end:{x:25,y:28}},{start:{x:25,y:19},end:{x:25,y:28}}]}},"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),p=n(22),x=function(e){Object(d.a)(n,e);var t=Object(l.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e=this;return i.a.createElement("div",{ref:function(t){return e.canvasDiv=t}})}},{key:"componentDidMount",value:function(){var e=this,t=new u.a({backgroundColor:6250335,width:800,height:600,sharedLoader:!0,sharedTicker:!0,antialias:!0});this.app=t,this.canvasDiv.appendChild(t.view),this.app.resizeTo=this.canvasDiv,this.app.resize();var n=new u.b;t.stage.addChild(n);this.canvasDiv.addEventListener("wheel",(function(e){var n=.1;e.wheelDeltaY<0&&(n*=-1);var a=Math.min(Math.max(t.stage.scale.x+n,.1),2);if(a!==t.stage.scale.x){t.stage.scale.set(a);var i=t.renderer.plugins.interaction.mouse.getLocalPosition(t.stage);t.stage.position.x-=i.x*n,t.stage.position.y-=i.y*n}})),this.canvasDiv.addEventListener("contextmenu",(function(e){e.preventDefault()})),this.canvasDiv.addEventListener("pointerdown",(function(){e.onMouseDown(t)})),this.canvasDiv.addEventListener("pointerup",(function(){e.onMouseUp(t,70)})),this.canvasDiv.addEventListener("pointermove",(function(e){2===e.buttons&&(t.stage.position.x+=e.movementX,t.stage.position.y+=e.movementY)})),t.ticker.add((function(a){var i=y.getState();n.clear(),e.drawSpaces(n,i.dungeon.spaces,70),e.drawWalls(n,i.dungeon.walls,70),e.drawGrid(n,i.dungeon.size.width,i.dungeon.size.height,70),t.renderer.plugins.interaction.mouseOverRenderer&&e.drawSelectedGridBox(t,i,70,n)}))}},{key:"onMouseDown",value:function(e){if(0===e.renderer.plugins.interaction.mouse.button){var t=e.renderer.plugins.interaction.mouse.getLocalPosition(e.stage);y.dispatch({type:"MOUSE_DOWN",x:t.x,y:t.y})}}},{key:"onMouseUp",value:function(e,t){if(0===e.renderer.plugins.interaction.mouse.button){var n=e.renderer.plugins.interaction.mouse.getLocalPosition(e.stage);y.dispatch({type:"MOUSE_UP"});var a=y.getState(),i=Math.floor(Math.min(a.mouseStartX,n.x)/t),o=Math.floor(Math.min(a.mouseStartY,n.y)/t),r=Math.ceil(Math.max(a.mouseStartX,n.x)/t),s=Math.ceil(Math.max(a.mouseStartY,n.y)/t);y.dispatch({type:"ADD_SPACE",newSpace:{id:Object(p.v4)(),position:{x:i,y:o},size:{width:r-i,height:s-o}}})}}},{key:"drawSpaces",value:function(e,t,n){e.beginFill(14079445),t.forEach((function(t){e.drawRect(t.position.x*n,t.position.y*n,t.size.width*n,t.size.height*n)})),e.endFill()}},{key:"drawWalls",value:function(e,t,n){e.beginFill(),t.forEach((function(t){e.beginFill(157414,1),e.lineStyle(10,157414,1,.5),e.moveTo(t.start.x*n,t.start.y*n),e.lineTo(t.end.x*n,t.end.y*n),e.lineStyle(),e.drawCircle(t.start.x*n,t.start.y*n,5),e.drawCircle(t.end.x*n,t.end.y*n,5),e.endFill()}))}},{key:"drawSelectedGridBox",value:function(e,t,n,a){var i,o,r,s,c=e.renderer.plugins.interaction.mouse.getLocalPosition(e.stage);if(t.mouseDown){var d=Math.min(t.mouseStartX,c.x),l=Math.min(t.mouseStartY,c.y),u=Math.max(t.mouseStartX,c.x),h=Math.max(t.mouseStartY,c.y);i=Math.floor(d/n)*n,o=Math.floor(l/n)*n,r=(u=Math.floor(u/n)*n+n)-i,s=(h=Math.floor(h/n)*n+n)-o}else i=Math.floor(c.x/n)*n,o=Math.floor(c.y/n)*n,r=n,s=n;a.beginFill(0,0),a.lineStyle(1,16776448),a.drawRect(i,o,r,s),a.endFill()}},{key:"drawGrid",value:function(e,t,n,a){e.lineStyle(1,4473924,1,.5);for(var i=0;i<t;i++)e.moveTo(i*a,0),e.lineTo(i*a,(n-1)*a);for(var o=0;o<n;o++)e.moveTo(0,o*a),e.lineTo((t-1)*a,o*a)}}]),n}(i.a.Component),g=n(8),f=function(e){var t=e.dispatch;return i.a.createElement("div",null,i.a.createElement("button",{onClick:function(){return t({type:"TOGGLE_MOVE_Y"})}},"Toggle Y Movement"))},w=f=Object(g.b)()(f);var b=function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("nav",{className:"navbar navbar-dark bg-secondary"},i.a.createElement("span",{className:"navbar-brand"},"Pungeon")),i.a.createElement("div",{className:"container"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-9"},i.a.createElement(x,null)),i.a.createElement("div",{className:"col-md-3"},i.a.createElement(w,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(g.a,{store:y},i.a.createElement(b,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[26,1,2]]]);
//# sourceMappingURL=main.96f08fc2.chunk.js.map